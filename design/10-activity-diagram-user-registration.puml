@startuml
title "活动图 - 用户注册流程"

|用户|
start
:访问网站注册页面;
:输入邮箱/手机号, 密码, 确认密码;
:点击"获取验证码";

|系统|
:验证邮箱/手机号格式是否正确;
:检查该邮箱/手机号是否已被注册;
if (未被注册?) then (是)
  :生成6位随机验证码;
  :将验证码与邮箱/手机号关联并存入Redis(设置5分钟有效期);
  :通过邮件/短信服务商发送验证码;
  |用户|
  :在邮箱/短信中查收验证码;
  :在页面上输入验证码;
  :阅读并同意用户协议;
  :点击"注册";
else (否)
  |用户|
  :收到"该用户已存在"的提示;
  stop
endif

|系统|
:接收注册请求;
:从Redis中获取该邮箱/手机号对应的验证码;
if (用户提交的验证码匹配且未过期?) then (是)
  :将用户信息(加密后的密码)存入数据库;
  :注册成功;
  |用户|
  :收到"注册成功"的提示;
  :自动登录并跳转到首页/个人中心;
  stop
else (否)
  |用户|
  :收到"验证码错误或已失效"的提示;
  stop
endif

@enduml 